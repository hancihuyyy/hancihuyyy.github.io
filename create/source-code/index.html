<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>hancihuyyy Â· Buat Link Kode</title>

  <!-- GA (opsional) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-K5JQPNMVEF"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','G-K5JQPNMVEF');</script>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{--c1:#0ea5e9;--c2:#22c55e}
    body{
      font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(99,102,241,.16), transparent 60%),
        radial-gradient(800px 420px at 10% 110%, rgba(14,165,233,.14), transparent 55%),
        linear-gradient(180deg,#0b1220,#0b1220);
      color:#e5e7eb;
    }
    .card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);backdrop-filter:blur(8px);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.25);animation:fade .4s ease both}
    .btn-grad{background-image:linear-gradient(to right,var(--c1),var(--c2));transition:transform .12s,box-shadow .2s}
    .btn-grad:hover{transform:translateY(-1px);box-shadow:0 10px 30px rgba(34,197,94,.25)}
    .input{background:rgba(15,23,42,.6);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:.7rem .9rem}
    .muted{color:#9aa0a6}
    .chip{font-size:.8rem;padding:.25rem .6rem;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06)}
    .pill{display:inline-flex;align-items:center;gap:.45rem;border-radius:999px;padding:.5rem .9rem;border:1px solid rgba(255,255,255,.15);backdrop-filter:blur(6px)}
    @keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
    code{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);padding:.25rem .45rem;border-radius:8px}
  </style>
</head>
<body>
  <header class="max-w-5xl mx-auto px-4 sm:px-6 pt-6 pb-2 flex items-center justify-between">
    <div class="flex items-center gap-2">
      <span class="chip">Create</span>
      <span class="text-sm opacity-80">Generator Link Kode</span>
    </div>
    <nav class="hidden sm:flex items-center gap-2">
      <a href="../../create/" class="chip">Buat Tugas</a>
      <a href="../../task/" class="chip">Lihat Task</a>
    </nav>
  </header>

  <main class="max-w-5xl mx-auto px-4 sm:px-6 pb-24">
    <section class="card p-6 sm:p-8 mt-4">
      <h1 class="text-2xl sm:text-3xl font-extrabold">Buat Link Kode</h1>
      <p class="muted mt-2">Link akan mengarah ke <code id="originShow"></code>/source-code</p>

      <div class="mt-6 grid sm:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm mb-1">Judul</label>
          <input id="title" type="text" class="input w-full" placeholder="Nama script / judul kode"/>
        </div>
        <div>
          <label class="block text-sm mb-1">Bahasa</label>
          <select id="type" class="input w-full">
            <option value="lua">Lua</option>
            <option value="javascript">JavaScript</option>
            <option value="python">Python</option>
            <option value="html">HTML</option>
            <option value="css">CSS</option>
            <option value="php">PHP</option>
            <option value="java">Java</option>
            <option value="csharp">C#</option>
            <option value="cpp">C++</option>
            <option value="json">JSON</option>
            <option value="markdown">Markdown</option>
            <option value="plaintext">Plaintext</option>
          </select>
        </div>
        <div class="sm:col-span-2">
          <label class="block text-sm mb-1">Kode</label>
          <textarea id="code" rows="8" class="input w-full" placeholder="Tulis kode di sini..."></textarea>
        </div>
      </div>

      <div class="mt-6 flex flex-wrap gap-3">
        <button id="genBtn" class="px-4 py-2 rounded-lg btn-grad text-white font-semibold">Buat Link</button>
        <button id="copyBtn" class="pill">ðŸ“‹ Salin</button>
        <a id="openBtn" class="pill" target="_blank">ðŸ”— Buka</a>
      </div>

      <div class="mt-4">
        <label class="block text-sm mb-1">Hasil Link</label>
        <input id="result" class="input w-full" readonly />
      </div>
    </section>

    <section id="analysis" class="card p-6 sm:p-8 mt-6">
      <h2 class="text-xl font-bold">Analisis</h2>
      <p class="muted mt-2">
        Bagian analisis tetap ada. Bisa dipakai untuk catatan internal, misalnya jumlah baris, bahasa yang dipilih, dsb.
      </p>
    </section>
  </main>

  <script>
    const $ = (s)=>document.querySelector(s);
    const originShow = $('#originShow');
    originShow.textContent = location.origin;

    const titleEl  = $('#title');
    const typeEl   = $('#type');
    const codeEl   = $('#code');
    const genBtn   = $('#genBtn');
    const copyBtn  = $('#copyBtn');
    const openBtn  = $('#openBtn');
    const resultEl = $('#result');

    function encodeData(obj){
      const json = JSON.stringify(obj);
      return btoa(encodeURIComponent(json));
    }

    function buildViewerUrl(payload){
      const base = `${location.origin}/source-code/`;
      return `${base}?data=${payload}`;
    }

    genBtn.addEventListener('click', ()=>{
      const title = titleEl.value.trim() || 'Kode Tanpa Judul';
      const type  = typeEl.value;
      const code  = codeEl.value;

      if(!code.trim()){
        alert('Kode masih kosong!');
        return;
      }

      const dataObj = { title, type, code };
      const payload = encodeData(dataObj);
      const url = buildViewerUrl(payload);

      resultEl.value = url;
      openBtn.href = url;
    });

    copyBtn.addEventListener('click', ()=>{
      const v = resultEl.value || '';
      if(!v) return;
      navigator.clipboard.writeText(v).then(()=>{
        copyBtn.textContent = 'âœ… Disalin';
        setTimeout(()=>{ copyBtn.textContent = 'ðŸ“‹ Salin'; }, 1200);
      });
    });
  </script>
</body>
</html>
